version: '3.1'

services:
  tomcat:
    image: tomcat:8.5-alpine
    environment:
      - CATALINA_OPTS=-Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.rmi.port=9999 -Djava.rmi.server.hostname=tomcat

  nri-jmx:
    container_name: integration_nri-jmx_1
    build:
      context: ../../
      dockerfile: tests/integration/Dockerfile
    dns:
      - 8.8.8.8
